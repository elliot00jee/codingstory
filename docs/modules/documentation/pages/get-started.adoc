= Antoraë¡œ í˜ì´ì§€ ìƒì„±í•˜ê¸°
:url-nvm: https://github.com/nvm-sh/nvm
:listing-caption!:

ê°œë°œ í™˜ê²½ì€ Ubuntu 20.04(WLS) ì´ê³ , ì˜¤ëŠ˜ í•´ë³¼ ê²ƒë“¤ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

* [x] Node.js ì„¤ì¹˜í•˜ê¸°
* [x] Antora ì„¤ì¹˜í•˜ê¸°
* [x] ì²«ë²ˆì§¸ Antora playbook ìƒì„±í•˜ê¸°
* [x] ìƒì„±í•œ playbook ê¸°ë°˜ìœ¼ë¡œ ì •ì  ì‚¬ì´íŠ¸ë¥¼ ìƒì„±í•˜ê¸°

[#install-nodejs]
== nvmê³¼ Node.js ì„¤ì¹˜í•˜ê¸°
AntoraëŠ” Node.jsë¡œ ë¹Œë“œë˜ê¸° ë•Œë¬¸ì— Antoraë¥¼ ì„¤ì¹˜í•˜ê³  êµ¬ë™í•˜ê¸° ìœ„í•´ì„œëŠ” Node.js(LTS)ê°€ í•„ìš”í•˜ë‹¤. (í•„ìš”í•œ ì»¤ë§¨ë“œ: `node`, `npm`, `npx`) Node.jsë¥¼ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì€ ë‹¤ì–‘í•˜ì§€ë§Œ, Antoraì—ì„œ ê¶Œì¥í•˜ëŠ” {url-nvm}[Node Version Manager (nvm)^]ì„ ì‚¬ìš©í•´ì„œ ì„¤ì¹˜í•´ë„ë¡ í•˜ì.

ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•´ë³´ì. ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë‹¤ìš´ ë°›ì•„ì„œ ì‹¤í–‰í•˜ê³ , í™˜ê²½ ë³€ìˆ˜ ë° ìë™ ì™„ì„± ê´€ë ¨ëœ ê¸°ëŠ¥ë“¤ì´ í”„ë¡œí•„ íŒŒì¼ì— ì¶”ê°€ëœë‹¤.

    $ curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash
    $ export NVM_DIR="$([ -z "${XDG_CONFIG_HOME-}" ] && printf %s "${HOME}/.nvm" || printf %s "${XDG_CONFIG_HOME}/nvm")"
    $ [ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh" # This loads nvm
    $ nvm version
    v16.15.1

nvmì´ ì„¤ì¹˜ë˜ê³  ë‚˜ë©´, Node.js LTS ë²„ì „ì„ ì„¤ì¹˜í•˜ì.

    $ nvm install --lts
    $ node --version
    v16.15.1

ì´ë¯¸ ì„¤ì¹˜ëœ Node.jsì˜ ë²„ì „ì´ ìµœì‹  LTSê°€ ì•„ë‹ ê²½ìš°ì—ëŠ” ë™ì¼í•œ ëª…ë ¹ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œ í•œ ë’¤, ê¸°ë³¸ Node.js ë²„ì „ì„ 16ìœ¼ë¡œ ì§€ì •í•œë‹¤.

    $ nvm install --lts
    $ nvm alias default 16

[#install-antora]
== Antora ì„¤ì¹˜í•˜ê¸°
Antoraë¡œ ì •ì  í˜ì´ì§€ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ì„œëŠ” Antora CLIì™€ Antora site generatorë¥¼ ì„¤ì¹˜í•´ì•¼ í•œë‹¤. playbook í”„ë¡œì íŠ¸ê°€ ìƒì„±ë  ìƒˆ ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“¤ì–´ì„œ ì´ë™ í•œ ë’¤, í•„ìš”í•œ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ë³´ì.

    $ mkdir docs-site && cd docs-site
    $ node -e "fs.writeFileSync('package.json', '{}')"
    $ npm i -D -E @antora/cli@3.0 @antora/site-generator@3.0

antora ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•´ë³´ë©´, cliì™€ site generatorê°€ ì˜ ì„¤ì¹˜ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

    $ antora -v
    @antora/cli: 3.0.1
    @antora/site-generator: 3.0.1

[#create-playbook]
== playbook ìƒì„±í•˜ê¸°
Antoraê°€ ì •ì  í˜ì´ì§€ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ì„œëŠ” playbookì„ í•„ìš”ë¡œ í•œë‹¤. ì „ ë‹¨ê³„ì—ì„œ ìƒì„±í•œ `docs-site` ë””ë ‰í† ë¦¬ ë‚´ì— `<<demo-playbook>>` ì„ ìƒì„±í•œ ë’¤, ì•„ë˜ì™€ ê°™ì´ ì…ë ¥í•˜ê³  ì €ì¥í•´ë³´ì.

.antora-playbook.yml
[#demo-playbook,yaml]
----
site:
  title: Antora Docs <.>
  url: https://elliot00jee.github.io/antora # <.>
  start_page: component-b::index.adoc # <.>
content:
  sources:
  - url: https://gitlab.com/antora/demo/demo-component-a.git # <.>
    branches: HEAD # <.>
  - url: https://gitlab.com/antora/demo/demo-component-b.git
    branches: [v2.0, v1.0]
    start_path: docs <.>
ui: #<.>
  bundle:
    url: https://gitlab.com/antora/antora-ui-default/-/jobs/artifacts/HEAD/raw/build/ui-bundle.zip?job=bundle-stable
    snapshot: true
----
<.> ì‚¬ì´íŠ¸ì˜ ì œëª©ìœ¼ë¡œ, ìƒë‹¨ ì™¼ìª½ì— ë…¸ì¶œëœë‹¤.
<.> ì‚¬ì´íŠ¸ì˜ URLì„ ì˜ë¯¸í•œë‹¤. Optional ê°’ì´ì§€ë§Œ, ë¹„ì›Œë†“ìœ¼ë©´ URL ê°’ì„ í•„ìš”ë¡œ í•˜ëŠ” íŠ¹ì • ê¸°ëŠ¥ë“¤ì´ ìë™ìœ¼ë¡œ ë¹„í™œì„±í™” ë˜ë¯€ë¡œ ì…ë ¥í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•œë‹¤.
<.> ì‚¬ì´íŠ¸ì—ì„œ ì‹œì‘ í˜ì´ì§€ë¡œ ì‚¬ìš©í•  í˜ì´ì§€ ì •ë³´ë¡œ, ë²„ì „ì„ ìƒëµí•  ê²½ìš° `latest` ë²„ì „ì˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ í˜ì´ì§€ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
<.> Antoraê°€ í•„ìš”í•œ ì»¨í…ì¸ ë“¤ì„ ê°€ì ¸ì˜¬ ë•Œ ì°¸ê³ í•  git ë¦¬í¬ì§€í† ë¦¬ URL
<.> ë¸Œëœì¹˜ ì´ë¦„(ë˜ëŠ” íŒ¨í„´). `branches` ë‚˜ `tags` ê°’ì´ ì—†ì„ ê²½ìš°ì—ëŠ” ë¡œì»¬ì€ í˜„ì¬ ë¸Œëœì¹˜, ë¦¬ëª¨íŠ¸ëŠ” ê¸°ë³¸ ë¸Œëœì¹˜ê°€ ì ìš©ëœë‹¤.
<.> ì»´í¬ë„ŒíŠ¸ì˜ ë£¨íŠ¸ ìƒíƒœ ê²½ë¡œì´ë©°, antora.yml íŒŒì¼ì´ ìˆëŠ” ê³³ì´ë‹¤.
<.> Antoraê°€ ì‚¬ì´íŠ¸ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” UI ë²ˆë“¤. ë²„ì „ì´ ê³„ì† ë³€í•˜ê¸° ë•Œë¬¸ì—, `snapshot: true` ë¡œ ì„¤ì •í•œë‹¤.

[#run-antora]
== Antora ì‹¤í–‰í•˜ê¸°
ìœ„ì—ì„œ ì‘ì„±í•œ <<demo-playbook>> ì´ ìˆëŠ” ìœ„ì¹˜(`docs-site)ë¡œ ì´ë™í•œ ë’¤, ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•œë‹¤.

    $ antora --fetch antora-playbook.yml
    [fetch] https://gitlab.com/antora/demo/demo-component-a.git [#########################################################################################]
    [fetch] https://gitlab.com/antora/demo/demo-component-b.git [#########################################################################################]
    Site generation complete!
    Open file:///home/elliot00jee/github/antora-test/build/site/index.html in a browser to view your site.

ë””ë ‰í† ë¦¬ êµ¬ì¡°ë¥¼ í™•ì¸í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.
----
ğŸ“‚ docs-site
  ğŸ“‚ build
    ğŸ“‚ _
      ğŸ“‚ css
      ğŸ“‚ font
      ğŸ“‚ img
      ğŸ“‚ js
    ğŸ“‚ component-a
    ğŸ“‚ component-b
    ğŸ“„ index.html
    ğŸ“„ 404.html <.>
    ğŸ“„ sitemap-component-a.xml
    ğŸ“„ sitemap-component-b.xml
    ğŸ“„ sitemap.xml
  ğŸ“‚ node_modules
  ğŸ“‚ node_modules
  ğŸ“„ antora-playbook.yml
  ğŸ“„ package-lock.json
  ğŸ“„ package.json
----
<.> <<demo-playbook>> ì—ì„œ `site.url` ì„ ëª…ì‹œí•˜ì§€ ì•Šì•˜ë‹¤ë©´, 404.html ë° sitemap íŒŒì¼ë“¤ì€ ìƒì„±ë˜ì§€ ì•ŠëŠ”ë‹¤.

[TIP]
ê¸°ë³¸ì ìœ¼ë¡œ AntoraëŠ” <<demo-playbook>> ì—ì„œ ì •ì˜í•œ git ë¦¬í¬ì§€í† ë¦¬ ë° UI ë²ˆë“¤ì„ ìºì‹±í•œë‹¤. í•´ë‹¹ git ë¦¬í¬ì§€í† ë¦¬ì— ë³€ê²½ì´ ìˆì–´ë„ ìºì‹±ëœ ë°ì´í„°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, Antoraì— ìµìˆ™í•´ì§ˆ ë•Œ ê¹Œì§€ëŠ” `--fetch` ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ ë¦¬ì†ŒìŠ¤ë¥¼ ìƒˆë¡œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆê²Œ í•˜ëŠ”ê²Œ ì¢‹ë‹¤.


Antoraë¥¼ ì‚¬ìš©í•´ ì •ì  í˜ì´ì§€ê°€ ìƒì„±ë˜ì—ˆë‹¤. `docs-site/build/site/index.html` íŒŒì¼ì„ í™•ì¸í•´ë³´ì.

image::1.png[]

ë‹¤ìŒì—ëŠ” ìƒì„±ëœ ì •ì  ì‚¬ì´íŠ¸ë¥¼ Github Actionê³¼ Github Pageë¥¼ ì‚¬ìš©í•´ì„œ ë°°í¬í•´ ë³´ë„ë¡ í•˜ì.